#* 
    freesteam stream integration for use in steam system calculations
    
    Originally based on steam.mso by Rafael de Pelegrini Soares.
    Modified by John Pye 2005 http://freesteam.sf.net
*#

using "steamequipment";

#*
    Boiler

    Specify outlet pressure plus q or outlet temperature

	THIS FLOWSHEET WORKS
*#
Model Boiler as SteamEquipment_ph # 7
    
    EQUATIONS   
	# Mass conservation	
	In.mdot = Out.mdot;
	m = 0 * "kg";
	
	# Energy conservation, no work, no volume
	Qdot - Wdot = Out.h * Out.mdot - In.h * In.mdot;
	H = 0 * "J";
	Wdot = 0 * "W";
end

#*
    Boiler

	THIS FLOWSHEET WORKS
*#
Model Boiler_pT as SteamEquipment_pT # 7
    
	EQUATIONS
	# Mass conservation	
	In.mdot = Out.mdot;
	m = 0 * "kg";
	
	# Energy conservation, no work, no volume
	Qdot - Wdot = Out.h * Out.mdot - In.h * In.mdot;
	H = 0 * "J";
	Wdot = 0 * "W";
end

#*
	Test of boiler with minor loss coefficient used to express pressure drop
	
	THIS FLOW SHEET WORKS
*#
Model BoilerWithLoss as Boiler # 7
		
	VARIABLES
    K as Positive(Brief="Minor loss coefficient for boiler");
	A_1 as Area(Brief="Boiler inlet pipe area");
		
    EQUATIONS
	"Pressure drop"
	Dp = -K * In.mdot^2 / In.freesteam.rho_ph(In.p,In.h) / A_1^2;
    
end