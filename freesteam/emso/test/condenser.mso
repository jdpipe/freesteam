#* 
    freesteam stream integration for use in steam system calculations
    
    Based on steam.mso by Rafael de Pelegrini Soares,
    Copyright 2002-2005 Rafael de Pelegrini Soares.

	Modified by John Pye 2005 http://freesteam.sf.net
*#

using "steamequipment";

#*  
	Simple condenser / heat exchanger model.

	Specify Qdot or DT. This model doesn't include 'cold-side' modelling.
*#
Model Condenser as SteamEquipment_ph # 8 + 2 - 3 = 7
    
	VARIABLES
	x as Quality;
	
    EQUATIONS
	# Mass conservation	
	In.mdot = Out.mdot;
	m = 0 * "kg";
	
	# Energy conservation, no work, no volume
	Qdot - Wdot = Out.h * Out.mdot - In.h * In.mdot;
	H = 0 * "J";
	Wdot =  0 * "W";
	
	# Outlet quality
	x = Out.freesteam.x_ph(Out.p,Out.h);
end

Model CondenserWithLoss as Condenser

	VARIABLES
    K as Positive(Brief="Minor loss coefficient for boiler");
	A_1 as Area(Brief="Boiler inlet pipe area");
		
    EQUATIONS
	"Pressure drop"
	Dp = - K * In.mdot^2 / In.freesteam.rho_ph(In.p,In.h) / A_1^2;
    
end
	