#* 
	freesteam stream integration for use in steam system calculations
	
	Based on steam.mso by Rafael de Pelegrini Soares,

	Copyright 2002-2005 Rafael de Pelegrini Soares.
	Modified by John Pye 2005 http://freesteam.sf.net
	
	This copyright statement must not be deleted and must be
	included in any modification or adaptation of this Model.
*#

using "streams";
using "turbine";

FlowSheet TestCondenser
	
	PARAMETERS
	freesteam as CalcObject(File="emsofreesteam");
	
	DEVICES
	S as Stream_ps;
	CO as Condenser;
	
	CONNECTIONS
	S to CO.In;
	
	SPECIFY
	S.mdot = 20000 * "kg/h";
	S.T = 400 * "K";
	S.p = 2 * "atm";
	
	#cond.q = 45 * "GJ/h";
	CO.DT = 10 * "K";
	
	GUESS 
	# FIXME: this is required when DT is specified instead of q
	# CO.Out.h = 300 * "kJ/kg";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end

FlowSheet TestCondenser_ps
	
	PARAMETERS
	freesteam as CalcObject(File="emsofreesteam");
	
	DEVICES
	s as Stream_ps;
	cond as Condenser;
	
	CONNECTIONS
	s to cond.In;
	
	SPECIFY
	s.mdot = 20000 * "kg/h";
	s.T = 300 * "K";
	s.p = 2 * "atm";
	
	#cond.q = 45 * "GJ/h";
	cond.DT = 10 * "K";
	cond.Out.p = 2 * "atm";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end
