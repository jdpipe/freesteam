<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>freesteam: steamcalculator.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>steamcalculator.h</h1><pre class="fragment"><div>00001 <span class="comment">/*</span>
00002 <span class="comment"></span>
00003 <span class="comment">freesteam - IAPWS-IF97 steam tables library</span>
00004 <span class="comment">Copyright (C) 2004-2005  John Pye</span>
00005 <span class="comment"></span>
00006 <span class="comment">This program is free software; you can redistribute it and/or</span>
00007 <span class="comment">modify it under the terms of the GNU General Public License</span>
00008 <span class="comment">as published by the Free Software Foundation; either version 2</span>
00009 <span class="comment">of the License, or (at your option) any later version.</span>
00010 <span class="comment"></span>
00011 <span class="comment">This program is distributed in the hope that it will be useful,</span>
00012 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00014 <span class="comment">GNU General Public License for more details.</span>
00015 <span class="comment"></span>
00016 <span class="comment">You should have received a copy of the GNU General Public License</span>
00017 <span class="comment">along with this program; if not, write to the Free Software</span>
00018 <span class="comment">Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
00019 <span class="comment"></span>
00020 <span class="comment">*/</span>
00021 <span class="preprocessor">#ifndef STEAMCALCULATOR_H</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define STEAMCALCULATOR_H</span>
00023 <span class="preprocessor"></span>
00024 <span class="preprocessor">#include "designbycontract.h"</span>
00025 <span class="preprocessor">#include "common.h"</span>
00026 <span class="preprocessor">#include "steamcalculatorexception.h"</span>
00027 <span class="preprocessor">#include "boundaries.h"</span>
00028 <span class="preprocessor">#include "state.h"</span>
00029 <span class="preprocessor">#include "zeroin.h"</span>
00030 
00031 <span class="keyword">typedef</span> <span class="keyword">enum</span> { STEAM_SUBCOOLED =
00032                    0, STEAM_SUPERHEATED, STEAM_SATURATED, STEAM_SUPERCRITICAL,
00033                STEAM_STATE_UNKNOWN = -1 } SteamStateCode;
00034 
00035 <span class="keyword">typedef</span> <span class="keyword">enum</span> { STEAM_TEMPERATURE =
00036                    0, STEAM_PRESSURE, STEAM_VOLUME, STEAM_INTERNAL_ENERGY,
00037                STEAM_ENTHALPY, STEAM_ENTROPY } SteamPropertyCode;
00038 
00082 
00083 
<a name="l00093"></a><a class="code" href="class_steam_calculator.html">00093</a> <span class="keyword">class </span><a class="code" href="class_steam_calculator.html">SteamCalculator</a>:<span class="keyword">public</span> <a class="code" href="class_design_by_contract.html">DesignByContract</a> {
00094 
00095         <span class="keyword">public</span>:
00096 
00098                 <a class="code" href="class_steam_calculator.html#a0">SteamCalculator</a>();
00099 
00101                 <a class="code" href="class_steam_calculator.html#a0">SteamCalculator</a>(<span class="keyword">const</span> <a class="code" href="class_steam_calculator.html">SteamCalculator</a> &amp; original);
00102 
00104                 <a class="code" href="class_steam_calculator.html">SteamCalculator</a> <span class="keyword">const</span> &amp;<a class="code" href="class_steam_calculator.html#a2">operator=</a>(<a class="code" href="class_steam_calculator.html">SteamCalculator</a> <span class="keyword">const</span> &amp;original);
00105 
00106                 <span class="comment">// Destructor</span>
00107                 <span class="keyword">virtual</span> <a class="code" href="class_steam_calculator.html#a3">~SteamCalculator</a>();
00108 
00109                 <span class="comment">// Defining state, simple methods</span>
00110 
00111                 <span class="keywordtype">void</span> set_pT(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;<a class="code" href="class_steam_calculator.html#p1">p</a>, <span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;<a class="code" href="class_steam_calculator.html#p0">T</a>, <span class="keywordtype">double</span> <a class="code" href="class_steam_calculator.html#p3">x</a> = 1.0);   <span class="comment">// pressure [MPa]</span>
00112 
00113                 <span class="keyword">template</span>&lt;<span class="keyword">class</span> F,<span class="keyword">class</span> S&gt;
00114                 <span class="keyword">inline</span> <span class="keywordtype">void</span> set(<span class="keyword">const</span> F &amp;f, <span class="keyword">const</span> S &amp;s);
00115 
00116                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a6">setSatSteam_p</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p);  <span class="comment">// p Pressure [MPa]</span>
00117                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a7">setSatWater_p</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p);  <span class="comment">// p Pressure [MPa]</span>
00118                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a8">setSatWater_T</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);       <span class="comment">// T Temperature [K]</span>
00119                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a9">setSatSteam_T</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);       <span class="comment">// T Temperature [K]</span>
00120 
00121                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a10">setB23_T</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);
00122                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a11">setB23_p</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p);
00123 
00124                 <span class="keywordtype">void</span> setRegion1_pT(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p, <span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);
00125                 <span class="keywordtype">void</span> setRegion2_pT(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p, <span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);
00126                 <span class="keywordtype">void</span> setRegion4_Tx(<span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T, <span class="keyword">const</span> Num &amp;x);
00127                 <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a15">setRegion3_rhoT</a>(<span class="keyword">const</span> <a class="code" href="class_units.html">Density</a> &amp;<a class="code" href="class_steam_calculator.html#p2">rho</a>, <span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T);
00128 
00129                 <span class="keywordtype">bool</span> <a class="code" href="class_steam_calculator.html#a16">isSet</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00130 
00131                 <span class="comment">// Methods to return properties and state</span>
00132 
00133                 <span class="keywordtype">int</span> <a class="code" href="class_steam_calculator.html#a17">whichRegion</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00134 
00135                 SteamStateCode <a class="code" href="class_steam_calculator.html#a18">whichState</a>(<span class="keywordtype">void</span>);
00136                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_steam_calculator.html#a19">SteamCalculator::whichStateStr</a>(<span class="keywordtype">void</span>);
00137 
00138                 <a class="code" href="class_units.html">Temperature</a> <a class="code" href="class_steam_calculator.html#a20">temp</a>() <span class="keyword">const</span>;               <span class="comment">// Temperature</span>
00139                 <a class="code" href="class_units.html">Pressure</a> <a class="code" href="class_steam_calculator.html#a21">pres</a>() <span class="keyword">const</span>;                  <span class="comment">// Pressure</span>
00140                 <a class="code" href="class_units.html">Density</a> <a class="code" href="class_steam_calculator.html#a22">dens</a>() <span class="keyword">const</span>;                   <span class="comment">// Density</span>
00141 
00142                 <a class="code" href="class_units.html">SpecificVolume</a> <a class="code" href="class_steam_calculator.html#a23">specvol</a>() <span class="keyword">const</span>;         <span class="comment">// Specific volume</span>
00143                 <a class="code" href="class_units.html">SpecificEnergy</a> <a class="code" href="class_steam_calculator.html#a24">specienergy</a>() <span class="keyword">const</span>;     <span class="comment">// Specific internal energy</span>
00144                 <a class="code" href="class_units.html">SpecificEntropy</a> <a class="code" href="class_steam_calculator.html#a25">specentropy</a>() <span class="keyword">const</span>;    <span class="comment">// Specific entropy</span>
00145                 <a class="code" href="class_units.html">SpecificEnergy</a> <a class="code" href="class_steam_calculator.html#a26">specenthalpy</a>() <span class="keyword">const</span>;    <span class="comment">// Specific entropy</span>
00146                 <a class="code" href="class_units.html">SpecHeatCap</a> <a class="code" href="class_steam_calculator.html#a27">speccp</a>() <span class="keyword">const</span>;             <span class="comment">// Specific isobaric heat capacity  [kJ/kgK]</span>
00147                 <a class="code" href="class_units.html">SpecHeatCap</a> <a class="code" href="class_steam_calculator.html#a28">speccv</a>() <span class="keyword">const</span>;             <span class="comment">// Specific isochoric heat capacity [kJ/kgK]</span>
00148                 Num <a class="code" href="class_steam_calculator.html#a29">quality</a>() <span class="keyword">const</span>;                    <span class="comment">// Steam quality</span>
00149                 <a class="code" href="class_units.html">DynamicViscosity</a> <a class="code" href="class_steam_calculator.html#a30">dynvisc</a>() <span class="keyword">const</span>;       <span class="comment">// Dynamic viscosity, mu            [Pa.s]</span>
00150                 <a class="code" href="class_units.html">Conductivity</a> <a class="code" href="class_steam_calculator.html#a31">conductivity</a>() <span class="keyword">const</span>;      <span class="comment">// Conductivity</span>
00151 
00152                 <span class="comment">// Design by contract stuff...</span>
00153                 <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_steam_calculator.html#a32">isValid</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00154 
00156                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_steam_calculator.html#a33">copy</a>(<span class="keyword">const</span> <a class="code" href="class_steam_calculator.html">SteamCalculator</a> &amp; original);
00157 
00158         <span class="keyword">protected</span>:
00159 
00160                 Num <a class="code" href="class_steam_calculator.html#b0">tau_iaps85</a>() <span class="keyword">const</span>;
00161                 Num <a class="code" href="class_steam_calculator.html#b1">del_iaps85</a>() <span class="keyword">const</span>;
00162                 Num <a class="code" href="class_steam_calculator.html#b2">pi_iaps85</a>() <span class="keyword">const</span>;
00163                 Num delpi_iaps85() <span class="keyword">const</span>;
00164                 Num pitau_iaps85() <span class="keyword">const</span>;
00165 
00166                 Num <a class="code" href="class_steam_calculator.html#b5">lam</a>() <span class="keyword">const</span>;        <span class="comment">// for thermal conductivity.</span>
00167                 Num <a class="code" href="class_steam_calculator.html#b6">lam0</a>() <span class="keyword">const</span>;
00168                 Num <a class="code" href="class_steam_calculator.html#b7">lam1</a>() <span class="keyword">const</span>;
00169                 Num <a class="code" href="class_steam_calculator.html#b8">lam2</a>() <span class="keyword">const</span>;
00170 
00171                 Num <a class="code" href="class_steam_calculator.html#b9">mu</a>() <span class="keyword">const</span>;
00172                 Num <a class="code" href="class_steam_calculator.html#b10">mu0</a>() <span class="keyword">const</span>;
00173                 Num <a class="code" href="class_steam_calculator.html#b11">mu1</a>() <span class="keyword">const</span>;
00174                 Num <a class="code" href="class_steam_calculator.html#b12">mu2</a>() <span class="keyword">const</span>;
00175 
00176                 <a class="code" href="class_units.html">Pressure</a> getRegion3PressureError(<span class="keyword">const</span> <a class="code" href="class_units.html">Density</a> &amp;test_rho);
00177 
00178                 <span class="comment">// All the intrinsic properties must be stored here because the states are singletons to save memory.</span>
00179 
<a name="l00180"></a><a class="code" href="class_steam_calculator.html#p0">00180</a>                 <a class="code" href="class_units.html">Temperature</a> T;                              
<a name="l00181"></a><a class="code" href="class_steam_calculator.html#p1">00181</a>                 <a class="code" href="class_units.html">Pressure</a> p;                                     
<a name="l00182"></a><a class="code" href="class_steam_calculator.html#p2">00182</a>                 <a class="code" href="class_units.html">Density</a> rho;                            
<a name="l00183"></a><a class="code" href="class_steam_calculator.html#p3">00183</a>                 Num x;                                  
00184 
<a name="l00185"></a><a class="code" href="class_steam_calculator.html#p4">00185</a>                 Num <a class="code" href="class_steam_calculator.html#p4">tau</a>;                                
<a name="l00186"></a><a class="code" href="class_steam_calculator.html#p5">00186</a>                 Num <a class="code" href="class_steam_calculator.html#p5">pi</a>;                                 
<a name="l00187"></a><a class="code" href="class_steam_calculator.html#p6">00187</a>                 Num <a class="code" href="class_steam_calculator.html#p6">del</a>;                                    
<a name="l00188"></a><a class="code" href="class_steam_calculator.html#p7">00188</a>                 <a class="code" href="class_units.html">Pressure</a> <a class="code" href="class_steam_calculator.html#p7">reg3_target_pressure</a>;      
00189 
00190         <span class="keyword">private</span>:
00191                 <span class="keyword">friend</span> <span class="keyword">class </span>SteamState;
00192                 <span class="keyword">friend</span> <span class="keyword">class </span>Region1;
00193                 <span class="keyword">friend</span> <span class="keyword">class </span>Region2;
00194                 <span class="keyword">friend</span> <span class="keyword">class </span>Region3;
00195                 <span class="keyword">friend</span> <span class="keyword">class </span>Region4;
00196                 <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_zero_in.html">ZeroIn</a>&lt;SteamCalculator, Pressure, Density&gt;;
00197 
00198                 <span class="keywordtype">bool</span> isset;             
00199 
00200                 <span class="keywordtype">void</span> changeState(SteamState * state);
00201 
00202                 <span class="keywordtype">void</span> destroy();
00203 
00204                 SteamState *_state;
00205 
00206                 SteamCalculator *gas;   <span class="comment">// for use in two-phase calcs</span>
00207                 SteamCalculator *liq;   <span class="comment">// for use in two-phase calcs</span>
00208 
00209 };
00210 
00211 <span class="keyword">template</span>&lt;&gt;
00212 <span class="keyword">inline</span> <span class="keywordtype">void</span>
00213 SteamCalculator::set&lt;Pressure,Temperature&gt;(<span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p, <span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T){
00214         set_pT(p,T);
00215 }
00216 
00217 <span class="keyword">template</span>&lt;&gt;
00218 <span class="keyword">inline</span> <span class="keywordtype">void</span>
00219 SteamCalculator::set&lt;Temperature,Pressure&gt;(<span class="keyword">const</span> <a class="code" href="class_units.html">Temperature</a> &amp;T, <span class="keyword">const</span> <a class="code" href="class_units.html">Pressure</a> &amp;p){
00220         set_pT(p,T);
00221 }
00222 
00223 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Tue Mar 22 19:07:05 2005 for freesteam by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
