<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>freesteam</title>
  <link rel="stylesheet" media="screen" href="freesteam.css"
 type="text/css">
</head>
<body>
<h1>freesteam<br>
</h1>
<div class="nav"><span style="font-weight: bold;">Current version: </span>0.3<br>
<br>
Quick links
<ul>
  <li><a href="http://sf.net/projects/freesteam">SourceForge</a> </li>
  <li><a
 href="http://sourceforge.net/project/showfiles.php?group_id=120898">Download</a>
  </li>
  <li><a href="/mantis/">Bug Tracker</a></li>
  <li><a
 href="http://cvs.sourceforge.net/viewcvs.py/freesteam/freesteam">Browse
CVS</a> </li>
</ul>
Contents
<ul>
  <li><a href="#h1">What can I do with it?</a> </li>
  <li><a href="#h2">Quick start</a> </li>
  <li><a href="#h3">Other compilers</a> </li>
  <li><a href="#h4">License</a> </li>
  <li><a href="#h5">Future directions</a> </li>
  <li><a href="#h6">Links</a> </li>
  <li><a href="#h7">Contact details</a></li>
</ul>
</div>
<h2>Introduction</h2>
<p><b>freesteam</b> is an open source implementation of
international-standard steam
tables from the International Association for the Properties of Water
and
Steam (IAPWS):</p>
<ul>
  <li>IAPWS-IF97 Industrial formulation (high speed, but complex code) </li>
  <li>IAPWS-95 Scientific formulation (low speed, but simple code) </li>
</ul>
<p>If you find <b>freesteam</b> useful, or you have some comments, or
you think you might be able
to help with its development, please <span style="font-weight: bold;">contact
us</span> using the details below.</p>
<h2><a name="h1"></a>1. What can I do with it?</h2>
<h3>1.1 IAPWS-IF97 Industrial Formulation<br>
</h3>
<p>You can use freesteam to calculate the properties of steam and water
given its state, using the IAPWS-IF97 equations.<br>
</p>
<table style="text-align: left;" cellspacing="10">
  <tbody>
    <tr>
      <td style="vertical-align: top;" class="bord">
      <p>First you must specify
the STATE of the steam, <br>
using one of the following combinations of variables:<br>
      </p>
      <p>(p,T) for subcooled/superheated steam.<br>
(rho,T) for supercritical steam.<br>
(T,x) for saturated steam<br>
(p,T,x) anywhere<br>
(p) plus one of (s,h,u,v,cp,cv,rho)<br>
(T) plus one of (s,h,u,v,cp,cv,rho)<br>
(u,v) anywhere, by two-way iteration<br>
      </p>
      <p>Alternatively, you can specify:<br>
saturated water at T<br>
saturated steam at T<br>
      </p>
      </td>
      <td style="vertical-align: top;" class="bord">
      <p> Then, you can obtain the value of any of <br>
the following steam
properties:</p>
      <table>
        <tbody>
          <tr>
            <td>p</td>
            <td style="vertical-align: middle;">Pressure</td>
          </tr>
          <tr>
            <td>T</td>
            <td>Temperature</td>
          </tr>
          <tr>
            <td>h</td>
            <td>Enthalpy</td>
          </tr>
          <tr>
            <td>s</td>
            <td>Entropy</td>
          </tr>
          <tr>
            <td>cp</td>
            <td>Isobaric heat capacity<br>
            </td>
          </tr>
          <tr>
            <td>cv</td>
            <td>Isochoric heat capacity<br>
            </td>
          </tr>
          <tr>
            <td>v</td>
            <td>Specific volume<br>
            </td>
          </tr>
          <tr>
            <td>rho</td>
            <td>Density</td>
          </tr>
          <tr>
            <td>u</td>
            <td>Internal energy<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
  </tbody>
</table>
<p>Also available are some 'boundary' functions which allow you to
calculate the
following:</p>
<table>
  <tbody>
    <tr>
      <td>Saturation pressure</td>
      <td>psat(T)</td>
    </tr>
    <tr>
      <td>Saturation temperature</td>
      <td>Tsat(p)</td>
    </tr>
  </tbody>
</table>
<h3><span style="font-weight: bold;">1.2 Example usage</span></h3>
<span style="font-weight: bold;">Problem:</span><br>
<ol>
  <li>calculate the density of steam at 5 bar and 200°C</li>
  <li>calculate the temperature if the steam from (1) is isentropically
compressed to 10 bar.</li>
  <li>calculate the pressure and temperature of steam at the same
specific volume as (2) but with the specific internal energy raised by
200 kJ/kg<br>
  </li>
</ol>
<span style="font-weight: bold;">Solution: </span>(included in
distribution as example.cpp, use '<code>make example</code>' to compile
it)<br>
<pre>#include "steamcalculator.h"<br>#include "solver.h"<br>#include "solver2.h"<br>#include &lt;iostream&gt;<br>#include &lt;iomanip&gt;<br>using namespace std;<br><br>int main(){<br>	try{<br>		SteamCalculator S1, S2, S3;<br><br>		// turn on display of units<br>		cerr.flags(ios_base::showbase);<br><br>		// initialise T1, p1, p2<br>		Temperature T1 = fromcelsius(200.0);<br>		Pressure p1 = 5.0 * bar;<br>		Pressure p2 = 10.0 * bar;<br><br>		// Part 1<br>		cerr &lt;&lt; endl &lt;&lt; "Part (1) - density at 10 bar, 200°C" &lt;&lt; endl;<br>		cerr &lt;&lt; "p1 = " &lt;&lt; p1/bar &lt;&lt; " bar" &lt;&lt; endl;<br>		cerr &lt;&lt; "T1 = " &lt;&lt; T1;<br>		cerr &lt;&lt; " (" &lt;&lt; tocelsius(T1) &lt;&lt; "°C)" &lt;&lt; endl;<br>		S1.set_pT(p1, T1);<br>		Density rho1 = S1.dens();<br>		cerr &lt;&lt; "rho1 = " &lt;&lt; rho1 &lt;&lt; endl;<br><br>		// Part 2<br>		cerr &lt;&lt; endl &lt;&lt; "Part (2) - isentropic compression to 10 bar" &lt;&lt; endl;<br>		SpecificEntropy s1 = S1.specentropy();<br>		cerr &lt;&lt; "s1 = " &lt;&lt; s1 &lt;&lt; endl;<br>		cerr &lt;&lt; "p2 = " &lt;&lt; p2/bar &lt;&lt; " bar" &lt;&lt; endl;<br>		Solver&lt;Pressure,SpecificEntropy,Temperature&gt; PS(p2, s1);<br>		S2 = PS.solve(0.0001 * kJ_kgK, 0.0001 * Kelvin);<br>		Temperature T2 = S2.temp();<br>		cerr &lt;&lt; "T2 = " &lt;&lt; T2;<br>		cerr &lt;&lt; " (" &lt;&lt; tocelsius(T2) &lt;&lt; "°C)" &lt;&lt; endl;<br><br>		// part (3) - Finding p,T for v as above and u increased by 200 kJ_kg<br>		cerr &lt;&lt; endl &lt;&lt; "Part (3) - Finding p,T for v as above and u increased by 200 kJ_kg" &lt;&lt; endl;<br>		SpecificVolume v2 = S2.specvol();<br>		SpecificEnergy u2 = S2.specienergy();<br>		cerr &lt;&lt; "v2 = " &lt;&lt; v2 &lt;&lt; endl;<br>		cerr &lt;&lt; "u2 = " &lt;&lt; u2 &lt;&lt; endl;<br><br>		SpecificEnergy u3 = u2 + 200.0 * kJ_kg;<br>		cerr &lt;&lt; "u3 = " &lt;&lt; u3 &lt;&lt; endl;<br><br>		Solver2&lt;SpecificEnergy,SpecificVolume&gt; SUV;<br>		S3 = SUV.solve(u3,v2);<br>		Temperature T3 = S3.temp();<br>		Pressure p3 = S3.pres();<br>		cerr &lt;&lt; "p3 = " &lt;&lt; p3/bar &lt;&lt; " bar" &lt;&lt; endl;<br>		cerr &lt;&lt; "T3 = " &lt;&lt; T3;<br>		cerr &lt;&lt; " (" &lt;&lt; tocelsius(T3) &lt;&lt; "°C)" &lt;&lt; endl;<br><br>		exit(0);<br><br>	}catch(Exception *E){<br>		cerr &lt;&lt; "Error: " &lt;&lt; E-&gt;what();<br>		exit(1);<br>	}<br>}<br></pre>
<p><span style="font-weight: bold;">Output:</span><br>
</p>
<pre>$ ./example<br><br>Part (1) - density at 10 bar, 200°C<br>p1 = 5 bar<br>T1 = 473.15 K (200°C)<br>rho1 = 2.35275 kg/m3<br><br>Part (2) - isentropic compression to 10 bar<br>s1 = 7061.07 J/kgK<br>p2 = 10 bar<br>T2 = 556.418 K (283.268°C)<br><br>Part (3) - Finding p,T for v as above and u increased by 200 kJ_kg<br>v2 = 0.249638 m3/kg<br>u2 = 2.76613e+06 J/kg<br>u3 = 2.96613e+06 J/kg<br>p3 = 12.372 bar<br>T3 = 679.854 K (406.704°C)<br></pre>
<h3>1.3 IAPWS-95 Scientific Formulation<br>
</h3>
<p>The code for calculating steam properties according to the IAPWS-95
equations, developed by Don Peterson, is include. In their present
form, the formulation allows you to calculate the
above properties but only in terms of <b>density</b> and <b>temperature</b>.</p>
<p>IAWPS-95 is said to be higher accuracy but consumes greater
computing time. This may depend on the formulation of your problem
however - some problems require quite a lot of iterative root-finding
when using IAPWS-IF97.<br>
</p>
<h2><a name="h2"></a>2. Quick start</h2>
If you haven't already, get the code from
<a href="http://sf.net/projects/freesteam">http://sf.net/projects/freesteam</a>.
Download the source files then using your linux/cygwin shell, type
'make'. You might need to configure
the
location of your compiler etc. at the top of the Makefile.<br>
<br>
If you want to run the test methods, you'll need to get a copy of
CppUnit.
You can get this at
<a href="http://sourceforge.net/projects/cppunit">http://sourceforge.net/projects/cppunit</a>.
You will then be able to type
'make test' and you should see a set of compiler-time and run-time test
results.
<p>The above steps will result in a file 'libsteam.a' which you can
link to in
your own code, along with steamcalculator.h.<br>
</p>
<p>You can view a quick demo of what freesteam can do by typing 'make
example' and then './example', as described above.<br>
</p>
<p>If you have trouble building CppUnit, you may possibly be able to
use a
binary version. Binary versions for cygwin are available via the cygwin
installer. But we've had no trouble so far building CppUnit from source
and installing - it is done with the GNU Autotools and works fine for
the GCC environments we've tested.<br>
</p>
<h2><a name="h3"></a>3. Other compilers</h2>
freesteam is known to compile and complete all tests correctly with
<ul>
  <li>GCC 3.3.3.3 (cygwin special) </li>
  <li>GCC 3.3.3 20040412 (Red Hat Linux 3.3.3-7)</li>
</ul>
<p>We intend to get freesteam working with other compilers, in
particular
GCC/mingw, VC++ and the Intel C++ compiler. It might even work with
those compilers
already. It is anticipated that the code will not work in present form
with VC++
6.0 because of the complexity of the template methods used
in the units-of-measurement class, 'units.h'.</p>
<p>We are going to be regularly testing under MinGW as well as Cygwin,
so
stay tuned for this.</p>
<h2><a name="h4"></a>4. License</h2>
<p>freesteam is released under the GNU GPL, which is available online
at
<a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>.
It is also distributed with the source code distribution for freesteam,
as LICENSE.txt.
</p>
<p>Note that at under the GPL, you can not dynamically or statically
link to the freesteam library from your own code unless your code is
also licensed under the GPL.</p>
<h2><a name="h5"></a>5. Future directions</h2>
<ul>
  <li>The current implementation used an IAPWS Supplementary Release
correlation for the density of <span style="font-weight: bold;">saturated
steam </span>when the temperature exceeds that of the region 1/region
3 boundary. This is not in keeping with the 'pure' IAPWS-IF97 Release,
and gives slightly different values for specific entropy at the
critical point as a result. See <a
 href="http://pye.dyndns.org/mantis/bug_view_page.php?bug_id=0000059">this
bug</a> for more information.</li>
  <li>The <span style="font-weight: bold;">one-way solver</span> has
some problems in certain situations. For example, solving for a desired
value of specific volume along the saturation curve will give errors at
low temperatures, because of the 'density anomaly'. See <a
 href="http://pye.dyndns.org/mantis/bug_view_page.php?bug_id=0000060">this
bug</a>.<br>
  </li>
  <li>The <span style="font-weight: bold;">two-way Newton-Raphson</span>
solver has been implemented using the approach of Reynolds (see Links).
This currently functions for (u,v) in regions 1,2,4 but not region 3.
As required, solvers will be added for other combinations of variables.
The problem is that you need to be able to predict which region the the
steam is in before you launch the solver, and this requires
case-by-case coding up.</li>
  <li>Perhaps develop a <span style="font-weight: bold;">GUI </span>version
using Qt or wxWindows or similar. I have no experience with these so
let me know if you'd like to help there.<br>
  </li>
  <li>We plan to put in place hooks that will allow freesteam to be
used from within <span style="font-weight: bold;">python</span>,
possibly using <span style="font-weight: bold;">SWIG</span>. Ditto.<br>
  </li>
  <li>An <span style="font-weight: bold;">interactive </span>commandline
steam tables program will be developed
for easy demonstration/interactive testing.</li>
  <li>There have been contributions for the <span
 style="font-weight: bold;">reverse equations in Region 2</span> - I
haven't incorporated these into the source code yet though.</li>
  <li>The <span style="font-weight: bold;">compiled size </span>of
the code is quite large at the moment, probably because of the large
amount of debugging code and GDB symbols. However some of this might be
to do with bad use of C++ templates, need to take a look at that.<br>
  </li>
</ul>
<h2><a name="h6"></a>6. Links</h2>
<dl>
  <dt>IAPWS-IF97 steam tables </dt>
  <dd><a href="http://www.iapws.org/">http://www.iapws.org/</a> </dd>
  <dd><a href="http://www.iapws.org/relguide/visc.pdf">http://www.iapws.org/relguide/visc.pdf</a>
  </dd>
  <dd><a href="http://www.iapws.org/relguide/thcond.pdf">http://www.iapws.org/relguide/thcond.pdf</a>
  </dd>
  <dd><a href="http://www.iapws.org/relguide/IF97.pdf">http://www.iapws.org/relguide/IF97.pdf<br>
    </a><a href="http://www.iapws.org/relguide/supsat.pdf">http://www.iapws.org/relguide/supsat.pdf<br>
    </a><br>
  </dd>
  <dt>Bernhard Spang's summary of IF97 </dt>
  <dd><a href="http://www.cheresources.com/iapwsif97.shtml">http://www.cheresources.com/iapwsif97.shtml<br>
    <br>
    </a> </dd>
  <dt>IAPWS-95 scientific formulation </dt>
  <dd><a href="http://www.iapws.org/relguide/IAPWS95.pdf">http://www.iapws.org/relguide/IAPWS95.pdf<br>
    <br>
    </a> </dd>
  <dt>CppUnit </dt>
  <dd><a href="http://cppunit.sourceforge.net/cgi-bin/moin.cgi">http://cppunit.sourceforge.net/cgi-bin/moin.cgi</a>
  </dd>
  <dd><a href="http://sourceforge.net/projects/cppunit">http://sourceforge.net/projects/cppunit<br>
    <br>
    </a> </dd>
  <dt>Rettig's units-of-measurement stuff </dt>
  <dd><a
 href="http://www.embedded.com/shared/printableArticle.jhtml?articleID=9900094">http://www.embedded.com/shared/printableArticle.jhtml?articleID=9900094</a>
  </dd>
  <dd><a href="http://www.embedded.com/code/2001code.htm">http://www.embedded.com/code/2001code.htm<br>
    <br>
    </a> </dd>
  <dt>Brent solver </dt>
  <dd><a href="http://www.library.cornell.edu/nr/bookcpdf.html">http://www.library.cornell.edu/nr/bookcpdf.html<br>
    <br>
    </a></dd>
  <dt>Commercial IAPWS calculators</dt>
  <dd>ChemicaLogic, USA: SteamTab SDK<br>
  </dd>
  <dd>University of Applied Sciences Zittau/Görlitz, Germany: FluidEXL <br>
ASME: ASTEM97</dd>
  <dd>G&amp;P Engineering: StmProps</dd>
  <dd>Wagner, Wolfgang, Kretzschmar, Hans-Joachim, <span
 style="font-style: italic;">International Steam Tables - The
Industrial Standard IAPWS-IF97 for the Thermodynamic Properties and
Supplemetary Equations for Other Properties: Tables, Algorithms,
Diagrams, Software</span>, <span class="bodytext"> 2nd ed., 2006 (!),
Springer, Germany.</span></dd>
  <dd><span class="bodytext"></span>MegaWatSoft: Steam97<br>
    <br>
  </dd>
  <dt>Free (in the OS sense) IAPWS calculators</dt>
  <dd>Bernhard Spang's IF-97 Excel plug-in <a
 href="http://www.cheresources.com/iapwsif97.shtml">http://www.cheresources.com/iapwsif97.shtml</a><br>
  </dd>
  <dd>PARVO95, PARVO67 <a href="http://fortraner.narod.ru/">http://fortraner.narod.ru/</a>
(in Russian, not tested)<br>
    <br>
  </dd>
  <dt>Some useful steam table charts</dt>
  <dd>Copied from Reynolds' <span style="font-style: italic;">Thermodynamic
Properties in SI</span>, Stanford Univ, 1979: <a
 href="http://www.mhtl.uwaterloo.ca/old/courses/ece309/notes/properties/charts/hs.html">h-s</a>,
    <a
 href="http://www.mhtl.uwaterloo.ca/old/courses/ece309/notes/properties/charts/ph.html">p-h</a>,
    <a
 href="http://www.mhtl.uwaterloo.ca/old/courses/ece309/notes/properties/charts/ts.html">T-s</a>,
    <a
 href="http://www.mhtl.uwaterloo.ca/old/courses/ece309/notes/properties/charts/vu.html">v-u</a></dd>
</dl>
Generally of interest about water and steam:<br>
<div style="margin-left: 40px;"><a
 href="http://www.lsbu.ac.uk/water/index.html">http://www.lsbu.ac.uk/water/index.html</a><br>
</div>
<h2><a name="h7"></a>7. Contact details</h2>
<p>You can contact us either via the email form on the
<a href="http://sourceforge.net/projects/freesteam/">project page on
sourceforge</a>, or email directly to
<script><!--

// 3m41L harvester protection

m='hn.pye@stud';
l='u.au';
i='nsw.ed';
e='jo';
a='ent.u';

document.write('<a href="mailto:'+e+m+a+i+l+'">'+e+m+a+i+l+'</a>');

//--></script>
<noscript>john DOT pye AT-SIGN student DOT unsw FULLSTOP edu POINT au
(spam protection)</noscript>
</p>
<address>Thursday, 27 January 2005</address>
</body>
</html>
