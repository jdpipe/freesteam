#* 
	freesteam stream integration for use in steam system calculations
	
	Based on steam.mso by Rafael de Pelegrini Soares,

	Copyright 2002-2005 Rafael de Pelegrini Soares.
	Modified by John Pye 2005 http://freesteam.sf.net
	
	This copyright statement must not be deleted and must be
	included in any modification or adaptation of this Model.
*#

using "streams";
using "pump";

#*
	Pump in terms of inlet state, efficiency and outlet pressure
	
	THIS FLOWSHEET WORKS
*#
FlowSheet PumpTest1
	
	DEVICES
	S1 as Stream_pT;
	PU as Pump;
	
	CONNECTIONS
	S1 to PU.In;
	
	SPECIFY
	
	"Flow rate"
	S1.mdot = 27 * "kg/min";
	
	"Inlet pressure"
	S1.p = 50 * "bar";
	
	"Inlet temperature"
	S1.T = 450 * "K";
	
	
	"Efficiency"
	PU.eta = 0.9;
	
	"Output pressure"
	PU.Out.p = 65 * "bar";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end

#*
	Similar to above but greater pressure range
	
	THIS FLOWSHEET WORKS
*#
FlowSheet PumpTest2
	
	DEVICES
	S1 as Stream_pT;
	PU as Pump;
	
	CONNECTIONS
	S1 to PU.In;
	
	SPECIFY
	S1.mdot = 30 * "kg/s";
	
	S1.p = 1.5 * "bar";
	S1.T = 380 * "K";
	
	PU.eta = 0.65;

	PU.Out.p = 60 * "bar";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end


#*
	Similar to above but Dp instead of Out.p

	THIS FLOWSHEET WORKS
*#
FlowSheet PumpTest3
	
	DEVICES
	S1 as Stream_pT;
	PU as Pump;
	
	CONNECTIONS
	S1 to PU.In;
	
	SPECIFY
	S1.mdot = 30 * "kg/s";
	
	S1.p = 1.5 * "bar";
	S1.T = 380 * "K";
	
	PU.eta = 0.65;

	PU.Dp = 58.5 * "bar";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end

#*
	Test of a pump with a pump curve.

	Inlet state is specified, then pump speed, flow rate and pump pressure rise; 
	the pumping power remains to be calculated.

	////THIS FLOWSHEET WORKS
	BROKEN !
*#
FlowSheet PumpTest4

	DEVICES
	S1 as Stream_pT;
	PU as PumpWithCurve;
	
	CONNECTIONS
	S1 to PU.In;

	SPECIFY
	S1.mdot= (1000 *"kg/m^3") * 5 * (0.001 * "m^3/s"); # 5 L/s

	S1.p = 50 * "bar";
	S1.T = (200 + 273.15) * "K";

	PU.z_max = 10 * "m" * 20; # 20 bar
	PU.Vdot_max = 10 * (0.001 * "m^3/s"); # 10 L/s
	PU.N_1 = 2000 * "1/min"; # 2000 RPM
	PU.eta = 0.65;
	
	PU.N = 2000 * "1/min"; # 3000 RPM
	PU.Out.p = 60 * "bar";
	
	OPTIONS
	mode="steady";
	outputLevel = "all";	
end

#*
	Let the pump curve determine the flow rate from the pressure rise, at fixed pump speed and power

	THIS FLOWSHEET WORKS
    ... BROKEN
*#
FlowSheet PumpTest5
	
	DEVICES
	S1 as Stream_pT;
	PU as PumpWithCurve;
	
	CONNECTIONS
	S1 to PU.In;

	SPECIFY
	S1.p = 50 * "bar";
	S1.T = (200 + 273.15) * "K";

	PU.z_max = 10 * "m" * 20;
	PU.Vdot_max = 10 * 0.001 * "m^3/s";
	PU.N_1 = 2000 * "1/min";
	PU.eta = 0.65;
	
	PU.N = 3000 * "1/min";
	PU.Out.p = 80 * "bar";
	PU.Wdot = 5000 * "W";
	
	OPTIONS
	mode="steady";
	outputLevel="all";
end

#*
	Let the pump curve determine the pressure rise given specified flow rate, speed and power

	THIS FLOWSHEET WORKS
   ... BROKEN
*#
FlowSheet PumpTest6
		
	DEVICES
	S1 as Stream_pT;
	PU as PumpWithCurve;
	
	CONNECTIONS
	S1 to PU.In;
	
	SPECIFY
	S1.mdot = 0.94 * "kg/s";
	
	S1.p = 40 * "bar";
	S1.T = (200 + 273.15) * "K";

	PU.z_max = 10 * "m" * 20;
	PU.Vdot_max = 10 * 0.001 * "m^3/s";
	PU.N_1 = 2000 * "1/min";
	PU.eta = 0.65;
	
	PU.N = 3000 * "1/min";
	PU.Wdot = 5000 * "W";

	OPTIONS
	mode="steady";
	outputLevel="all";
end
