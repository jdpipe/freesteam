#* 
	freesteam stream integration for use in steam system calculations
	
	Based on steam.mso by Rafael de Pelegrini Soares,

	Copyright 2002-2005 Rafael de Pelegrini Soares.
	Modified by John Pye 2005 http://freesteam.sf.net
	
	This copyright statement must not be deleted and must be
	included in any modification or adaptation of this Model.
*#

using "streams";
using "turbine";


FlowSheet TurbineTest_Ideal # DF = 0 ?
	
	PARAMETERS
	freesteam as CalcObject(File="emsofreesteam");
	
	DEVICES # DF = 11
	S1 as Stream_ps;      # DF = 3
	S2 as Stream;
	TU as Turbine_Ideal;  # DF = 8
	
	CONNECTIONS # DF = -7
	S1 to TU.In;          # DF - 7
	TU.Out to S2;
	
	SPECIFY # DF = -4
	"Inlet flowrate"
	S1.mdot = 20000 * "kg/h";
	 
	"Inlet pressure"
	S1.p = 4.32 * "MPa";
	
	"Inlet temperature"
	S1.T = 670.65 * "K";
		
	#"Outlet pressure"
	#TU.Out.p = 1.569 * "MPa";
	
	#TU.P = 500 * "W";
	TU.Out.p = 1.569 * "MPa";
	
	OPTIONS
	outputLevel = "all";
	mode="steady";
end

FlowSheet TurbineTest 
	
	PARAMETERS
	freesteam as CalcObject(File="emsofreesteam");
	
		DEVICES
	S1 as Stream_ph;
	S2 as Stream;
	TU as Turbine;
	
	CONNECTIONS
	S1 to TU.In;
	TU.Out to S2;
	
	SPECIFY
	"Inlet flowrate"
	S1.mdot = 20000 * "kg/h";
	
	"Inlet pressure"
	S1.p = 4.32 * "MPa";
	
	"Inlet temperature"
	S1.T = 670.65 * "K";
	
	"Efficiency"
	TU.eta = .83;
	
	"Outlet pressure"
	TU.Out.p = 1.569 * "MPa";
	
	OPTIONS
	mode = "steady";
	outputLevel = "all";
end
