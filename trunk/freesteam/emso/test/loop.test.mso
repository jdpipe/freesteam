
using "pipe2";
using "pump";

FlowSheet LoopSimple

	PARAMETERS
	pipe as CalcObject(File="emsopipe");
	freesteam as CalcObject(File="emsofreesteam");
	
	DEVICES
	S1 as Stream_pT;
	PI as Pipe2;
	# PU as PumpSimple;
	
	CONNECTIONS
	#S1 to PU.In;
	#PU.Out to PI.In;
	S1 to PI.In;
	#PI.Out to PU.In;
	
	SPECIFY
	
	S1.p = 70 * "bar";
	S1.T = (25 + 273.15) * "K";
	S1.mdot = 0.1 * "kg/s";
	
	SET
	# PU.eta = 0.99;
	PI.n = 5;
	PI.D = 0.025 * "m";
	PI.L = 100 * "m";
	PI.eps = 46e-6 * "m";
	# PI.Qdot = 0 * "W";

	INITIAL
	# PI.h = 500 * "kJ/kg";
	PI.X([2:PI.n]).p = S1.p;
	PI.X([2:PI.n]).u = freesteam.u_pT(S1.p,S1.T);
	PI.X([2:PI.n]).mdot = 0.1 * "kg/s";
	
	OPTIONS
	# mode="steady";
	time = [0:0.1:30] * "s";
	
	outputLevel="high";
end
