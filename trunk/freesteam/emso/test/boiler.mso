#* 
    freesteam stream integration for use in steam system calculations
    
    Based on steam.mso by Rafael de Pelegrini Soares,

    Copyright 2002-2005 Rafael de Pelegrini Soares.
    Modified by John Pye 2005 http://freesteam.sf.net
    
    This copyright statement must not be deleted and must be
    included in any modification or adaptation of this Model.
*#

using "steamequipment"

#*
    Boiler

    Specify outlet pressure plus q or outlet temperature
*#
Model Boiler as SteamEquipment
    
    VARIABLES
    q   as HeatRate;

    EQUATIONS
    "Mass balance"
    Out.mdot = In.mdot;

    "Energy balance"
    q = Out.mdot * Out.h - In.mdot * In.h;
    
    [Out.T, Out.s, Out.v, Out.x] = freesteam.Tsvx_ph(Out.p, Out.h);
end
