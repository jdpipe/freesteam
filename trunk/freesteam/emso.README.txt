
INTEGRATION OF FREESTEAM WITH EMSO
----------------------------------

A DLL which exposes freesteam methods to the system modelling 
package EMSO is under development currently.

Please follow these exact steps when building the DLL (or 
shared object, '.so' file in the case of linux) for EMSO. 
That way we can diagnose any problems which arise.

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
IMPORTANT NOTE
emsofreesteam does NOT build
correctly under cygwin at the 
moment. You need to download
and install MinGW and MSYS
then type 'make emso' under
that environment
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

1. Build and test freesteam

       make test

2. Install EMSO according to instructions given on the EMSO
   website,
       
       http://rps.eng.br/download.html

3. Put EMSO header files in the standard INCLUDE path so that 
   they are accessible as <emso/emso_types.h> and 
   <emso/external_object.h>

       On Windows, this would be c:\Windows\usr\local\include\emso
   
       On Linux, this would be /usr/local/include/emso

4. If using windows, modify the <emso/emso_types.h> file 
   replacing all occurences of

       #ifdef WIN32
       
   with
       
       #if defined(WIN32) || defined(__CYGWIN__)

5. Build the emsofreesteam shared object / DLL

       make emso
   
   You should find a DLL/SO file generated as a result
   
       On Windows, this would be emsofreesteam.dll
       On Linux, this would be libemsofreesteam.so
   
6. Copy the shared object / DLL to its required location,
   and rename it according to the requirements of EMSO. This 
   means taking out the version number for the DLL and 
   placing it in the 'interface' directory within the EMSO
   base directory.

       On windows, this would be c:\Program Files\EMSO\interface\emsofreesteam.dll
   
       On Linux, this would be /usr/local/emso/interface/libemsofreesteam.so
   
7. Start emso and open the emsotest.mso file included with 
   the freesteam distribution.

8. Right-click on test2, click 'check consistency'


At present, on Windows with MinGW/MSYS under WinXP, this 
works OK. If you find that these steps break for you, 
please let me know by email to 

john_DOT_pye#student-unsw-edu-au

If you do have any problems, and you're using Windows, I 
suggest you download and install the Microsoft Dependency 
Walker, from http://www.dependencywalker.com/ and check
to make sure you're not having DLL dependency problems.

---------------------------------
John Pye
Wednesday, 2 March 2005